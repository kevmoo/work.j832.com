---
layout: post
title: Method Piping - Dart Syntax Proposal
date: '2014-04-28T08:28:00.002-07:00'
author: Kevin Moore
tags:
- dartlang
- dart
modified_time: '2014-04-28T15:01:37.390-07:00'
thumbnail: http://3.bp.blogspot.com/-i2ProaKCWzo/U15ZwRwJdAI/AAAAAAAAAco/GCuOKlPoPF4/s72-c/dart-nice-pipes.png
blogger_id: tag:blogger.com,1999:blog-2115056243892631308.post-379455368053753436
blogger_orig_url: http://work.j832.com/2014/04/method-piping-dart-syntax-proposal.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-i2ProaKCWzo/U15ZwRwJdAI/AAAAAAAAAco/GCuOKlPoPF4/s1600/dart-nice-pipes.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-i2ProaKCWzo/U15ZwRwJdAI/AAAAAAAAAco/GCuOKlPoPF4/s1600/dart-nice-pipes.png" height="298" width="320" /></a></div><br /><i>Update 1: I was delighted, but not totally surprised that someone else thought this was a good idea – 2 months ago. <a href="https://plus.google.com/+PatriceChalin/">Patrice Chalin</a> wrote up <a href="http://pchalin.blogspot.fr/2014/02/case-for-pipe-operator-in-dart.html">the proposal on his blog</a> in February and filed a <a href="https://code.google.com/p/dart/issues/detail?id=16900">feature request</a>. I've closed my request as a duplicate of his.</i><br /><i><br /></i><i>Disclaimer: <b>This is not in anyway official.</b> It's an idea. If you're excited about it, great. Please star <a href="https://code.google.com/p/dart/issues/detail?id=16900">the associated issue</a>. I'm trying to judge interest in the Dart community.</i><br /><br />One of the first Dart issues – the 13th, to be precise – was <a href="https://code.google.com/p/dart/issues/detail?id=13">for C#-style extension methods</a>.<br /><br />This is not possible in a consistent and performant way due to Dart's type system.<br /><br />But I'm pretty sure that most Dart developers that want C#-style extension methods would be happy with something much more simple.<br /><br />Imagine the following code<br /><pre>...<br />class Foo {<br />  ...<br />&nbsp; void fooMethod() {<br />  &nbsp; ...<br />&nbsp;   var items = [true, null, "Test", 42];<br />&nbsp;   var isEven = _isEven(countWhere(items, (e) =&gt; e is bool)); <br />&nbsp; }<br />}<br /></pre><br /><code>_isEven</code> could be an instance method on <code>Foo</code>, or a static method on <code>Foo</code>, or a top-level method in the current library.<br /><br /><code>countWhere</code> could also be a instance or static method on <code>Foo</code>, or a top-level method on the current library or an imported library. It could also be a function defined in-line in <code>fooMethod</code>.<br /><br />Now imagine an alternative syntax for the same behavior, with a new sugar in the form of <code>|&gt;</code> – the <b>method pipe</b>. <br /><br /><pre>...<br />class Foo {<br />  ...<br />&nbsp; void fooMethod() {<br />  &nbsp; ...<br />&nbsp;   var items = [true, null, "Test", 42];<br />&nbsp;   var isEven = items |&gt;&nbsp;countWhere((e) =&gt; e is bool) |&gt; _isEven(); <br />&nbsp; }<br />}<br /></pre><br /><b>Method pipe</b> is simple. Anything of the form<br /><br /><pre>g(f(expression))</pre><br />Can be written as<br /><br /><pre>expression |&gt; f() |&gt; g()</pre><br />Basically, the expression on the left side of <code>|&gt;</code> is passed as the first parameter of the function on the right of <code>|&gt;.</code><br /><br />What about multiple arguments? Named arguments?<br /><br />If you had function<br /><br /><pre>int count(int a, int b, int c, {int d}) { ... }</pre><br />You can call it as<br /><br /><pre>count(1, 2, 3, d: 4);</pre><br />or<br /><br /><pre>1 |&gt; count(2, 3, d: 4);</pre><br />What if you try to call a method that has no default parameters? Or you try to call a field like a method?<br /><br />The same thing that happens now.<br /><pre>int value = 5;<br />void run({String arg}) { ... }<br /><br />// Today: Warning in the analyzer and errors at runtime<br />value(10);<br />run("test");<br /><br />// Tomorrow: Warnings in the analyzer and errors at runtime;<br />10 |&gt; value();<br />"test" |&gt; run();<br /></pre><br />See where I'm going?<br /><br />The method pipe syntax – <code>|&gt;</code> – is completely up for debate. But I like the model. One could create and import a library full of top-level methods that consume <code>Iterable</code> – <code>groupBy</code>, <code>countWhere</code>, <code>wrapWithUnmodifiableList</code>, etc and write.<br /><br /><pre>var items = [1, 2, 3, 4, 5];<br /><br />var groups = items |&gt; groupBy((e) =&gt; ...);<br />var evenCount = items |&gt; countWhere((e) =&gt; ...);<br />var readOnly = items |&gt; wrapWithUnmodifiableList();</pre><br />Thoughts?<br /><br />Here's the <a href="https://code.google.com/p/dart/issues/detail?id=16900">feature request</a>.